<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Black room</title>
    <style>
        * { padding: 0; margin: 0; }
        body {width:100%; height: 100%;  min-width: 1024px;  min-height: 768px;}
        canvas { background: #000; display: block; margin: 0 auto; min-width: 1024px;  min-height: 768px; width:100%; height:100%;}
        canvas:active {cursor: url("https://cdn4.iconfinder.com/data/icons/devices-gaming/24/fist-512.png"), auto;}
        img {
        -moz-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        }
    </style>
</head>
<body>
<img class="j" src="headphones.jpg" style="position: absolute;top:15px;right: 145px;width: 50px;height: auto;"}/>
<img class="j" src="arrow.png" style="position: absolute;top: 35px;right: 75px; width: 50px;height: auto;"}/>
<img class="j" src="head.png" style="position: absolute;top:15px;right:15px;width: 50px;height: auto;"}/>
<canvas id="wall"></canvas>
<audio id="audio_wall" preload="auto" controls="none" crossOrigin="anonymous" style="position:absolute; top:-100px;">
<source src="knock_1.mp3" type="audio/mp3" display="none">
</audio>
    
<script>

    function getRandomInt(min,max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    
    function init()
    {
    	find = false;
    	cw = document.getElementById("canvas-wrapper");
        canvas = document.getElementById("wall");
        ctx = canvas.getContext("2d");
        ctx.globalAlpha = 0.0;
        knock_sound = document.getElementById("audio_wall");
        
	canvas_bounds = canvas.getBoundingClientRect();
        width = canvas_bounds.width;
        height = canvas_bounds.height;
	    
      	base_image = new Image();
	base_image.src = 'c2.jpeg';
        im_width = base_image.naturalWidth;
  	im_height = base_image.naturalHeight;
        ctx.drawImage(base_image, 0,0);
        base_image.onload = function(){
        	ctx.drawImage(base_image, 0, 300);
         }
        
        random_x = getRandomInt(80,width);
        random_y = getRandomInt(80,height);
        
        console.log("Init x: " + random_x);
        console.log("Init y: " + random_y);
        
        canvas.addEventListener("click", function(e){
        console.log(e.clientX);
        console.log(e.clientY);
        
        dx=random_x-e.clientX;
        dy=random_y-e.clientY;
        
        distance = Math.sqrt(dx*dx+dy*dy);
        if (distance >= 120 && find == false)
        {
          vol = 0.1;
          if (distance > 800){ vol=0.1;}
          else if (distance > 500){ vol=0.15;}
          else if (distance > 300){ vol=0.45;}
          else if (distance > 200){ vol=0.7;}
          else if (distance > 120){ vol=1.0;}
          else {vol=1.0;}
          console.log("Dist: " + distance);
          console.log("Vol: " + vol);
          knock_sound.volume = parseFloat(vol);
          knock_sound.play();
        }
        else {
            ctx.globalAlpha = 1.0;
        	ctx.drawImage(base_image, width/2-im_width/2, height/2-im_height/2);
            find = true;
        }
        })
    }

    init();
</script>

</body>
</html>
